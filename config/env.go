package config

import (
	"os"

	"github.com/joho/godotenv"
)

type Config struct {
	Port                  string
	DbHost                string
	DbName                string
	DbUser                string
	DbPassword            string
	DbPort                string
	DbSchema              string
	KafkaBroker           string
	KafkaSecurityProtocol string
	KafkaSaslMechanism    string
	KafkaSaslUsername     string
	KafkaSaslPassword     string
}

var Envs = initConfig()

func initConfig() Config {
	_ = godotenv.Load()

	return Config{
		Port:                  GetEnv("PORT"),
		DbHost:                GetEnv("DB_HOST"),
		DbName:                GetEnv("DB"),
		DbUser:                GetEnv("DB_USER"),
		DbPassword:            GetEnv("DB_PASSWORD"),
		DbPort:                GetEnv("DB_PORT"),
		DbSchema:              GetEnv("DB_SCHEMA"),
		KafkaBroker:           GetEnv("KAFKA_BROKER"),
		KafkaSecurityProtocol: GetEnv("KAFKA_SECURITY_PROTOCOL"),
		KafkaSaslMechanism:    GetEnv("KAFKA_SASL_MECHANISM"),
		KafkaSaslUsername:     GetEnv("KAFKA_SASL_USERNAME"),
		KafkaSaslPassword:     GetEnv("KAFKA_SASL_PASSWORD"),
	}
}

func GetEnv(key string) string {
	value := os.Getenv(key)
	if value != "" {
		return value
	}
	return ""
}
