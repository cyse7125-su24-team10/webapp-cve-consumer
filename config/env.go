package config

import (
	"os"

	"github.com/joho/godotenv"
)

type Config struct {
	Port          string
	DbHost        string
	DbName        string
	DbUser        string
	DbPassword    string
	DbPort        string
	DbSchema      string
	KafkaBroker0  string
	KafkaBroker1  string
	KafkaBroker2  string
	KafkaUser     string
	KafkaPassword string
}

var Envs = initConfig()

func initConfig() Config {
	_ = godotenv.Load()

	return Config{
		Port:          GetEnv("PORT"),
		DbHost:        GetEnv("DB_HOST"),
		DbName:        GetEnv("DB"),
		DbUser:        GetEnv("DB_USER"),
		DbPassword:    GetEnv("DB_PASSWORD"),
		DbPort:        GetEnv("DB_PORT"),
		DbSchema:      GetEnv("DB_SCHEMA"),
		KafkaBroker0:  GetEnv("KAFKA_BROKER0"),
		KafkaBroker1:  GetEnv("KAFKA_BROKER1"),
		KafkaBroker2:  GetEnv("KAFKA_BROKER2"),
		KafkaUser:     GetEnv("KAFKA_USER"),
		KafkaPassword: GetEnv("KAFKA_PASSWORD"),
	}
}

func GetEnv(key string) string {
	value := os.Getenv(key)
	if value != "" {
		return value
	}
	return ""
}
